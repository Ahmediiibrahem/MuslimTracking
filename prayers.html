<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>الصلوات</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@700&display=swap" rel="stylesheet">

<style>
body {
    font-family: 'Cairo', sans-serif;
    background: #121212;
    color: #e0e0e0;
    padding: 20px;
    direction: rtl;
}

h2 { text-align: center; }

input[type="date"] {
    padding: 8px;
    width: 100%;
    max-width: 300px;
    margin-bottom: 15px;
}

table {
    width: 100%;
    border-collapse: collapse;
}

th, td {
    border: 1px solid #444;
    padding: 10px;
    text-align: center;
}

th { background: #1f1f1f; }

.box {
    width: 26px;
    height: 26px;
    border: 1px solid #888;
    margin: auto;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
}

.checked::after {
    content: "✔";
    color: #4caf50;
}

.progress-bar {
    width: 100%;
    height: 18px;
    background: #333;
    border-radius: 4px;
    overflow: hidden;
}

.progress-fill {
    height: 100%;
    width: 0%;
    background: #4caf50;
}
</style>
</head>

<body>

<h2>متابعة الصلوات</h2>

<input type="date" id="dayPicker">

<table>
<thead>
<tr>
<th>اليوم</th>
<th>الفجر</th>
<th>الضحى</th>
<th>الظهر</th>
<th>العصر</th>
<th>المغرب</th>
<th>العشاء</th>
<th>الإنجاز</th>
</tr>
</thead>
<tbody id="tbody"></tbody>
</table>

<script>
const picker = document.getElementById("dayPicker");
const tbody = document.getElementById("tbody");

picker.addEventListener("change", () => {
    tbody.innerHTML = "";
    createRow(picker.value);
});

function createRow(dateVal) {
    if (!dateVal) return;

    const row = document.createElement("tr");
    const dateCell = document.createElement("td");
    dateCell.textContent = new Date(dateVal).toLocaleDateString("ar-EG");
    row.appendChild(dateCell);

    const prayers = ['الفجر','الضحى','الظهر','العصر','المغرب','العشاء'];
    const boxes = [];

    prayers.forEach(() => {
        const td = document.createElement("td");
        const box = document.createElement("div");
        box.className = "box";

        box.onclick = () => {
            box.classList.toggle("checked");
            const done = boxes.filter(b => b.classList.contains("checked")).length;
            progressFill.style.width = (done / boxes.length) * 100 + "%";
        };

        td.appendChild(box);
        row.appendChild(td);
        boxes.push(box);
    });

    const progressTd = document.createElement("td");
    const bar = document.createElement("div");
    bar.className = "progress-bar";
    const fill = document.createElement("div");
    fill.className = "progress-fill";

    bar.appendChild(fill);
    progressTd.appendChild(bar);
    row.appendChild(progressTd);

    tbody.appendChild(row);

    var progressFill = fill;
}
</script>

</body>
</html>
