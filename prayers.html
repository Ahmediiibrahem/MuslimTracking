<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø§Ù„ØµÙ„ÙˆØ§Øª</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@700&display=swap" rel="stylesheet">

<style>
body {
    font-family: 'Cairo', sans-serif;
    background:#121212;
    color:#eee;
    padding:20px;
}

.date-box {
    max-width: 260px;
    margin: auto;
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.date-box label {
    color:#aaa;
}

.date-box input {
    padding: 10px;
    border-radius: 8px;
    border:1px solid #444;
    background:#1f1f1f;
    color:#fff;
}

table {
    width:100%;
    border-collapse: collapse;
    margin-top:20px;
}

th, td {
    border:1px solid #444;
    padding:10px;
    text-align:center;
}

th {
    background:#1f1f1f;
}

.box {
    width:26px;
    height:26px;
    border:1px solid #777;
    margin:auto;
    cursor:pointer;
    display:flex;
    align-items:center;
    justify-content:center;
}

.checked::after {
    content:"âœ”";
    color:#4caf50;
}

.progress-bar {
    background:#333;
    border-radius:5px;
    height:18px;
    overflow:hidden;
}

.progress-fill {
    height:100%;
    width:0%;
    background:#4caf50;
    transition:0.3s;
}
</style>
</head>
<body>

<div class="date-box">
    <label>ğŸ“… Ø§Ø®ØªØ± Ø§Ù„ÙŠÙˆÙ…</label>
    <input type="date" id="dayPicker">
</div>

<table>
<thead>
<tr>
<th>Ø§Ù„ÙŠÙˆÙ…</th>
<th>Ø§Ù„ÙØ¬Ø±</th>
<th>Ø§Ù„Ø¶Ø­Ù‰</th>
<th>Ø§Ù„Ø¸Ù‡Ø±</th>
<th>Ø§Ù„Ø¹ØµØ±</th>
<th>Ø§Ù„Ù…ØºØ±Ø¨</th>
<th>Ø§Ù„Ø¹Ø´Ø§Ø¡</th>
<th>Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²</th>
</tr>
</thead>
<tbody id="tbody"></tbody>
</table>

<script>
const picker = document.getElementById("dayPicker");
const tbody = document.getElementById("tbody");

function savePrayers(date, data) {
    localStorage.setItem("prayers_" + date, JSON.stringify(data));
}

function loadPrayers(date) {
    return JSON.parse(localStorage.getItem("prayers_" + date));
}

picker.addEventListener("change", () => {
    tbody.innerHTML = "";
    if (!picker.value) return;
    createRow(picker.value);
});

function createRow(dateVal) {
    const saved = loadPrayers(dateVal) || [];
    const row = document.createElement("tr");

    const dateCell = document.createElement("td");
    dateCell.textContent = dateVal;
    row.appendChild(dateCell);

    const names = ["Ø§Ù„ÙØ¬Ø±","Ø§Ù„Ø¶Ø­Ù‰","Ø§Ù„Ø¸Ù‡Ø±","Ø§Ù„Ø¹ØµØ±","Ø§Ù„Ù…ØºØ±Ø¨","Ø§Ù„Ø¹Ø´Ø§Ø¡"];
    const boxes = [];

    names.forEach((_, i) => {
        const td = document.createElement("td");
        const box = document.createElement("div");
        box.className = "box";

        if (saved[i]) box.classList.add("checked");

        box.onclick = () => {
            box.classList.toggle("checked");
            const state = boxes.map(b => b.classList.contains("checked"));
            savePrayers(dateVal, state);
            updateProgress(state);
        };

        boxes.push(box);
        td.appendChild(box);
        row.appendChild(td);
    });

    const progressTd = document.createElement("td");
    const bar = document.createElement("div");
    bar.className = "progress-bar";
    const fill = document.createElement("div");
    fill.className = "progress-fill";
    bar.appendChild(fill);
    progressTd.appendChild(bar);
    row.appendChild(progressTd);

    function updateProgress(state) {
        const done = state.filter(v => v).length;
        fill.style.width = (done / 6) * 100 + "%";
    }

    if (saved.length) updateProgress(saved);

    tbody.appendChild(row);
}
</script>
</body>
</html>
