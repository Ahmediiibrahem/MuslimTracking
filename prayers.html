<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø§Ù„ØµÙ„ÙˆØ§Øª</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@700&display=swap" rel="stylesheet">
<style>
body {
    font-family: Cairo, sans-serif;
    background:#121212;
    color:#eee;
    padding:20px;
    direction: rtl;
}

.date-box {
    max-width: 260px;
    margin-bottom: 15px;
}

.date-box input, button {
    width: 100%;
    padding: 10px;
    border-radius: 8px;
    border: none;
    margin-top: 6px;
    font-weight: bold;
}

button {
    background:#4caf50;
    color:white;
    cursor:pointer;
}

table {
    width:100%;
    border-collapse:collapse;
    margin-top:20px;
}

th, td {
    border:1px solid #444;
    padding:10px;
    text-align:center;
}

.box {
    width:24px;
    height:24px;
    border:1px solid #aaa;
    margin:auto;
    cursor:pointer;
}

.checked::after {
    content:"âœ”";
    color:#4caf50;
    font-weight:bold;
}

.progress-bar {
    height:18px;
    background:#333;
    border-radius:6px;
    overflow:hidden;
}

.progress-fill {
    height:100%;
    width:0%;
    background:#4caf50;
}
</style>
</head>
<body>

<h2>ğŸ•Œ Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„ØµÙ„ÙˆØ§Øª</h2>

<div class="date-box">
    <label>Ø§Ø®ØªØ± Ø§Ù„ÙŠÙˆÙ…</label>
    <input type="date" id="dayPicker">
    <button id="addDayBtn">â• Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙŠÙˆÙ…</button>
</div>

<table>
<thead>
<tr>
<th>Ø§Ù„ÙŠÙˆÙ…</th>
<th>Ø§Ù„ÙØ¬Ø±</th>
<th>Ø§Ù„Ø¶Ø­Ù‰</th>
<th>Ø§Ù„Ø¸Ù‡Ø±</th>
<th>Ø§Ù„Ø¹ØµØ±</th>
<th>Ø§Ù„Ù…ØºØ±Ø¨</th>
<th>Ø§Ù„Ø¹Ø´Ø§Ø¡</th>
<th>Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²</th>
</tr>
</thead>
<tbody id="tbody"></tbody>
</table>

<script>
const tbody = document.getElementById("tbody");
const picker = document.getElementById("dayPicker");
const addBtn = document.getElementById("addDayBtn");

const DAYS_KEY = "prayer_days";

function getDays() {
    return JSON.parse(localStorage.getItem(DAYS_KEY)) || [];
}

function saveDays(days) {
    localStorage.setItem(DAYS_KEY, JSON.stringify(days));
}

function saveDayState(date, data) {
    localStorage.setItem("prayer_" + date, JSON.stringify(data));
}

function loadDayState(date) {
    return JSON.parse(localStorage.getItem("prayer_" + date));
}

addBtn.onclick = () => {
    if (!picker.value) return;
    let days = getDays();
    if (!days.includes(picker.value)) {
        days.push(picker.value);
        saveDays(days);
        renderAll();
    }
};

function renderAll() {
    tbody.innerHTML = "";
    getDays().forEach(d => createRow(d));
}

function createRow(date) {
    const tr = document.createElement("tr");
    const saved = loadDayState(date) || [];

    const dateTd = document.createElement("td");
    dateTd.textContent = new Date(date).toLocaleDateString("ar-EG");
    tr.appendChild(dateTd);

    const boxes = [];

    ["Ø§Ù„ÙØ¬Ø±","Ø§Ù„Ø¶Ø­Ù‰","Ø§Ù„Ø¸Ù‡Ø±","Ø§Ù„Ø¹ØµØ±","Ø§Ù„Ù…ØºØ±Ø¨","Ø§Ù„Ø¹Ø´Ø§Ø¡"].forEach((_, i) => {
        const td = document.createElement("td");
        const box = document.createElement("div");
        box.className = "box";

        if (saved[i]) box.classList.add("checked");

        box.onclick = () => {
            box.classList.toggle("checked");
            const state = boxes.map(b => b.classList.contains("checked"));
            saveDayState(date, state);
            updateProgress();
        };

        boxes.push(box);
        td.appendChild(box);
        tr.appendChild(td);
    });

    const progressTd = document.createElement("td");
    const bar = document.createElement("div");
    bar.className = "progress-bar";
    const fill = document.createElement("div");
    fill.className = "progress-fill";
    bar.appendChild(fill);
    progressTd.appendChild(bar);
    tr.appendChild(progressTd);

    function updateProgress() {
        const done = boxes.filter(b => b.classList.contains("checked")).length;
        fill.style.width = (done / boxes.length) * 100 + "%";
    }

    updateProgress();
    tbody.appendChild(tr);
}

renderAll();
</script>
</body>
</html>
