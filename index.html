<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø¹Ø¨Ø§Ø¯Ø§Øª</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@700&display=swap" rel="stylesheet">
<style>
body {
    font-family: Cairo, sans-serif;
    background:#121212;
    color:#eee;
    padding:20px;
    direction: rtl;
}

.tabs {
    display:flex;
    justify-content:center;
    gap:20px;
    margin-bottom:20px;
}

.tab {
    padding:10px 20px;
    cursor:pointer;
    border-radius:8px 8px 0 0;
    background:#333;
    font-weight:bold;
}

.tab.active {
    background:#4caf50;
}

.tab-content {
    display:none;
}

.tab-content.active {
    display:block;
}

.date-box {
    max-width:260px;
    margin-bottom:15px;
}

.date-box input, button {
    width:100%;
    padding:10px;
    border-radius:8px;
    border:none;
    margin-top:6px;
    font-weight:bold;
}

button {
    background:#4caf50;
    color:white;
    cursor:pointer;
}

table {
    width:100%;
    border-collapse:collapse;
    margin-top:10px;
}

th, td {
    border:1px solid #444;
    padding:8px;
    text-align:center;
}

.box {
    width:24px;
    height:24px;
    border:1px solid #aaa;
    margin:auto;
    cursor:pointer;
}

.checked::after {
    content:"âœ”";
    color:#4caf50;
}

.progress-bar {
    height:18px;
    background:#333;
    border-radius:6px;
    overflow:hidden;
}

.progress-fill {
    height:100%;
    width:0%;
    background:#4caf50;
}

.quran-entry {
    display:flex;
    flex-wrap:wrap;
    gap:5px;
    margin-bottom:5px;
    align-items:center;
}

.quran-entry select, .quran-entry input {
    padding:6px;
    font-weight:bold;
    text-align:center;
    border-radius:4px;
    border:1px solid #555;
    background-color:#1e1e1e;
    color:#eee;
}

.quran-entry input { width:70px; }

.add-quran, .mark-read, .edit-quran, .delete-quran {
    margin-left:5px;
    padding:4px 8px;
    font-weight:bold;
    cursor:pointer;
    border-radius:4px;
    font-size:14px;
}

.add-quran { background:#4caf50; color:white; }
.mark-read { background:#4caf50; color:white; }
.edit-quran { background:#ff9800; color:white; }
.delete-quran { background:#f44336; color:white; }

.quran-entry.read input, .quran-entry.read select { pointer-events:none; opacity:0.6; background-color:#2e2e2e; }

.error-msg { color:#f44336; font-weight:bold; margin-top:5px; }
</style>
</head>
<body>

<h1>Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø¹Ø¨Ø§Ø¯Ø§Øª</h1>

<div class="tabs">
    <div class="tab active" data-tab="prayers-tab">ğŸ•Œ Ø§Ù„ØµÙ„ÙˆØ§Øª</div>
    <div class="tab" data-tab="azkar-tab">ğŸ“– Ø§Ù„Ø£Ø°ÙƒØ§Ø± ÙˆØ§Ù„ÙˆØ±Ø¯</div>
</div>

<div id="prayers-tab" class="tab-content active">
    <div class="date-box">
        <label>Ø§Ø®ØªØ± Ø§Ù„ÙŠÙˆÙ…</label>
        <input type="date" id="prayerDayPicker">
        <button id="addPrayerDayBtn">â• Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙŠÙˆÙ…</button>
    </div>
    <table>
    <thead>
    <tr>
        <th>Ø§Ù„ÙŠÙˆÙ…</th>
        <th>Ø§Ù„ÙØ¬Ø±</th>
        <th>Ø§Ù„Ø¶Ø­Ù‰</th>
        <th>Ø§Ù„Ø¸Ù‡Ø±</th>
        <th>Ø§Ù„Ø¹ØµØ±</th>
        <th>Ø§Ù„Ù…ØºØ±Ø¨</th>
        <th>Ø§Ù„Ø¹Ø´Ø§Ø¡</th>
        <th>Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²</th>
    </tr>
    </thead>
    <tbody id="prayerTbody"></tbody>
    </table>
</div>

<div id="azkar-tab" class="tab-content">
    <div class="date-box">
        <label>Ø§Ø®ØªØ± Ø§Ù„ÙŠÙˆÙ…</label>
        <input type="date" id="azkarDayPicker">
        <button id="addAzkarDayBtn">â• Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙŠÙˆÙ…</button>
    </div>
    <table>
    <thead>
    <tr>
        <th>Ø§Ù„ÙŠÙˆÙ…</th>
        <th>Ø£Ø°ÙƒØ§Ø± Ø§Ù„ØµØ¨Ø§Ø­</th>
        <th>Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ù…Ø³Ø§Ø¡</th>
        <th>Ø§Ù„ÙˆØ±Ø¯ Ø§Ù„Ù‚Ø±Ø¢Ù†ÙŠ</th>
    </tr>
    </thead>
    <tbody id="azkarTbody"></tbody>
    </table>
</div>

<script>
// ØªØ§Ø¨Ø§Øª
const tabs = document.querySelectorAll('.tab');
tabs.forEach(t => {
    t.onclick = () => {
        tabs.forEach(x=>x.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(c=>c.classList.remove('active'));
        t.classList.add('active');
        document.getElementById(t.dataset.tab).classList.add('active');
    }
});

// ================== Ø§Ù„ØµÙ„ÙˆØ§Øª ==================
const prayerTbody = document.getElementById("prayerTbody");
const prayerPicker = document.getElementById("prayerDayPicker");
const addPrayerBtn = document.getElementById("addPrayerDayBtn");
const PRAYER_KEY = "prayer_days";

function getPrayerDays() { return JSON.parse(localStorage.getItem(PRAYER_KEY))||[]; }
function savePrayerDays(d){ localStorage.setItem(PRAYER_KEY, JSON.stringify(d)); }
function savePrayerState(date,data){ localStorage.setItem("prayer_"+date, JSON.stringify(data)); }
function loadPrayerState(date){ return JSON.parse(localStorage.getItem("prayer_"+date)); }

addPrayerBtn.onclick = ()=>{
    if(!prayerPicker.value) return;
    let days = getPrayerDays();
    if(!days.includes(prayerPicker.value)){
        days.push(prayerPicker.value);
        savePrayerDays(days);
        renderPrayerAll();
    }
};

function renderPrayerAll(){
    prayerTbody.innerHTML="";
    getPrayerDays().forEach(d=>createPrayerRow(d));
}

function createPrayerRow(date){
    const tr = document.createElement("tr");
    const saved = loadPrayerState(date) || [];

    const dateTd = document.createElement("td");
    dateTd.textContent = new Date(date).toLocaleDateString("ar-EG");
    tr.appendChild(dateTd);

    const boxes=[];
    ["Ø§Ù„ÙØ¬Ø±","Ø§Ù„Ø¶Ø­Ù‰","Ø§Ù„Ø¸Ù‡Ø±","Ø§Ù„Ø¹ØµØ±","Ø§Ù„Ù…ØºØ±Ø¨","Ø§Ù„Ø¹Ø´Ø§Ø¡"].forEach((_,i)=>{
        const td = document.createElement("td");
        const box = document.createElement("div");
        box.className="box";
        if(saved[i]) box.classList.add("checked");
        box.onclick = ()=>{
            box.classList.toggle("checked");
            const state = boxes.map(b=>b.classList.contains("checked"));
            savePrayerState(date,state);
            updateProgress();
        };
        boxes.push(box);
        td.appendChild(box);
        tr.appendChild(td);
    });

    const progressTd = document.createElement("td");
    const bar = document.createElement("div"); bar.className="progress-bar";
    const fill = document.createElement("div"); fill.className="progress-fill";
    bar.appendChild(fill);
    progressTd.appendChild(bar);
    tr.appendChild(progressTd);

    function updateProgress(){
        const done = boxes.filter(b=>b.classList.contains("checked")).length;
        fill.style.width=(done/boxes.length)*100+"%";
    }
    updateProgress();
    prayerTbody.appendChild(tr);
}

// ================== Ø§Ù„Ø£Ø°ÙƒØ§Ø± ÙˆØ§Ù„ÙˆØ±Ø¯ ==================
const surahs = [
    {name: 'Ø§Ù„ÙØ§ØªØ­Ø©', ayat: 7},{name: 'Ø§Ù„Ø¨Ù‚Ø±Ø©', ayat: 286},{name: 'Ø¢Ù„ Ø¹Ù…Ø±Ø§Ù†', ayat: 200},{name: 'Ø§Ù„Ù†Ø³Ø§Ø¡', ayat: 176},{name: 'Ø§Ù„Ù…Ø§Ø¦Ø¯Ø©', ayat: 120},
    {name: 'Ø§Ù„Ø£Ù†Ø¹Ø§Ù…', ayat: 165},{name: 'Ø§Ù„Ø£Ø¹Ø±Ø§Ù', ayat: 206},{name: 'Ø§Ù„Ø£Ù†ÙØ§Ù„', ayat: 75},{name: 'Ø§Ù„ØªÙˆØ¨Ø©', ayat: 129},{name: 'ÙŠÙˆÙ†Ø³', ayat: 109},
    {name: 'Ù‡ÙˆØ¯', ayat: 123},{name: 'ÙŠÙˆØ³Ù', ayat: 111},{name: 'Ø§Ù„Ø±Ø¹Ø¯', ayat: 43},{name: 'Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ…', ayat: 52},{name: 'Ø§Ù„Ø­Ø¬Ø±', ayat: 99},
    {name: 'Ø§Ù„Ù†Ø­Ù„', ayat: 128},{name: 'Ø§Ù„Ø¥Ø³Ø±Ø§Ø¡', ayat: 111},{name: 'Ø§Ù„ÙƒÙ‡Ù', ayat: 110},{name: 'Ù…Ø±ÙŠÙ…', ayat: 98},{name: 'Ø·Ù‡', ayat: 135},
    {name: 'Ø§Ù„Ø£Ù†Ø¨ÙŠØ§Ø¡', ayat: 112},{name: 'Ø§Ù„Ø­Ø¬', ayat: 78},{name: 'Ø§Ù„Ù…Ø¤Ù…Ù†ÙˆÙ†', ayat: 118},{name: 'Ø§Ù„Ù†ÙˆØ±', ayat: 64},{name: 'Ø§Ù„ÙØ±Ù‚Ø§Ù†', ayat: 77},
    {name: 'Ø§Ù„Ø´Ø¹Ø±Ø§Ø¡', ayat: 227},{name: 'Ø§Ù„Ù†Ù…Ù„', ayat: 93},{name: 'Ø§Ù„Ù‚ØµØµ', ayat: 88},{name: 'Ø§Ù„Ø¹Ù†ÙƒØ¨ÙˆØª', ayat: 69},{name: 'Ø§Ù„Ø±ÙˆÙ…', ayat: 60},
    {name: 'Ù„Ù‚Ù…Ø§Ù†', ayat: 34},{name: 'Ø§Ù„Ø³Ø¬Ø¯Ø©', ayat: 30},{name: 'Ø§Ù„Ø£Ø­Ø²Ø§Ø¨', ayat: 73},{name: 'Ø³Ø¨Ø£', ayat: 54},{name: 'ÙØ§Ø·Ø±', ayat: 45},
    {name: 'ÙŠØ³', ayat: 83},{name: 'Ø§Ù„ØµØ§ÙØ§Øª', ayat: 182},{name: 'Øµ', ayat: 88},{name: 'Ø§Ù„Ø²Ù…Ø±', ayat: 75},{name: 'ØºØ§ÙØ±', ayat: 85},
    {name: 'ÙØµÙ„Øª', ayat: 54},{name: 'Ø§Ù„Ø´ÙˆØ±Ù‰', ayat: 53},{name: 'Ø§Ù„Ø²Ø®Ø±Ù', ayat: 89},{name: 'Ø§Ù„Ø¯Ø®Ø§Ù†', ayat: 59},{name: 'Ø§Ù„Ø¬Ø§Ø«ÙŠØ©', ayat: 37},
    {name: 'Ø§Ù„Ø£Ø­Ù‚Ø§Ù', ayat: 35},{name: 'Ù…Ø­Ù…Ø¯', ayat: 38},{name: 'Ø§Ù„ÙØªØ­', ayat: 29},{name: 'Ø§Ù„Ø­Ø¬Ø±Ø§Øª', ayat: 18},{name: 'Ù‚', ayat: 45},
    {name: 'Ø§Ù„Ø°Ø§Ø±ÙŠØ§Øª', ayat: 60},{name: 'Ø§Ù„Ø·ÙˆØ±', ayat: 49},{name: 'Ø§Ù„Ù†Ø¬Ù…', ayat: 62},{name: 'Ø§Ù„Ù‚Ù…Ø±', ayat: 55},{name: 'Ø§Ù„Ø±Ø­Ù…Ù†', ayat: 78},
    {name: 'Ø§Ù„ÙˆØ§Ù‚Ø¹Ø©', ayat: 96},{name: 'Ø§Ù„Ø­Ø¯ÙŠØ¯', ayat: 29},{name: 'Ø§Ù„Ù…Ø¬Ø§Ø¯Ù„Ø©', ayat: 22},{name: 'Ø§Ù„Ø­Ø´Ø±', ayat: 24},{name: 'Ø§Ù„Ù…Ù…ØªØ­Ù†Ø©', ayat: 13},
    {name: 'Ø§Ù„ØµÙ', ayat: 14},{name: 'Ø§Ù„Ø¬Ù…Ø¹Ø©', ayat: 11},{name: 'Ø§Ù„Ù…Ù†Ø§ÙÙ‚ÙˆÙ†', ayat: 11},{name: 'Ø§Ù„ØªØºØ§Ø¨Ù†', ayat: 18},{name: 'Ø§Ù„Ø·Ù„Ø§Ù‚', ayat: 12},
    {name: 'Ø§Ù„ØªØ­Ø±ÙŠÙ…', ayat: 12},{name: 'Ø§Ù„Ù…Ù„Ùƒ', ayat: 30},{name: 'Ø§Ù„Ù‚Ù„Ù…', ayat: 52},{name: 'Ø§Ù„Ø­Ø§Ù‚Ø©', ayat: 52},{name: 'Ø§Ù„Ù…Ø¹Ø§Ø±Ø¬', ayat: 44},
    {name: 'Ù†ÙˆØ­', ayat: 28},{name: 'Ø§Ù„Ø¬Ù†', ayat: 28},{name: 'Ø§Ù„Ù…Ø²Ù…Ù„', ayat: 20},{name: 'Ø§Ù„Ù…Ø¯Ø«Ø±', ayat: 56},{name: 'Ø§Ù„Ù‚ÙŠØ§Ù…Ø©', ayat: 40},
    {name: 'Ø§Ù„Ø§Ù†Ø³Ø§Ù†', ayat: 31},{name: 'Ø§Ù„Ù…Ø±Ø³Ù„Ø§Øª', ayat: 50},{name: 'Ø§Ù„Ù†Ø¨Ø£', ayat: 40},{name: 'Ø§Ù„Ù†Ø§Ø²Ø¹Ø§Øª', ayat: 46},{name: 'Ø¹Ø¨Ø³', ayat: 42},
    {name: 'Ø§Ù„ØªÙƒÙˆÙŠØ±', ayat: 29},{name: 'Ø§Ù„Ø§Ù†ÙØ·Ø§Ø±', ayat: 19},{name: 'Ø§Ù„Ù…Ø·ÙÙÙŠÙ†', ayat: 36},{name: 'Ø§Ù„Ø§Ù†Ø´Ù‚Ø§Ù‚', ayat: 25},{name: 'Ø§Ù„Ø¨Ø±ÙˆØ¬', ayat: 22},
    {name: 'Ø§Ù„Ø·Ø§Ø±Ù‚', ayat: 17},{name: 'Ø§Ù„Ø£Ø¹Ù„Ù‰', ayat: 19},{name: 'Ø§Ù„ØºØ§Ø´ÙŠØ©', ayat: 26},{name: 'Ø§Ù„ÙØ¬Ø±', ayat: 30},{name: 'Ø§Ù„Ø¨Ù„Ø¯', ayat: 20},
    {name: 'Ø§Ù„Ø´Ù…Ø³', ayat: 15},{name: 'Ø§Ù„Ù„ÙŠÙ„', ayat: 21},{name: 'Ø§Ù„Ø¶Ø­Ù‰', ayat: 11},{name: 'Ø§Ù„Ø´Ø±Ø­', ayat: 8},{name: 'Ø§Ù„ØªÙŠÙ†', ayat: 8},
    {name: 'Ø§Ù„Ø¹Ù„Ù‚', ayat: 19},{name: 'Ø§Ù„Ù‚Ø¯Ø±', ayat: 5},{name: 'Ø§Ù„Ø¨ÙŠÙ†Ø©', ayat: 8},{name: 'Ø§Ù„Ø²Ù„Ø²Ù„Ø©', ayat: 8},{name: 'Ø§Ù„Ø¹Ø§Ø¯ÙŠØ§Øª', ayat: 11},
    {name: 'Ø§Ù„Ù‚Ø§Ø±Ø¹Ø©', ayat: 11},{name: 'Ø§Ù„ØªÙƒØ§Ø«Ø±', ayat: 8},{name: 'Ø§Ù„Ø¹ØµØ±', ayat: 3},{name: 'Ø§Ù„Ù‡Ù…Ø²Ø©', ayat: 9},{name: 'Ø§Ù„ÙÙŠÙ„', ayat: 5},
    {name: 'Ù‚Ø±ÙŠØ´', ayat: 4},{name: 'Ø§Ù„Ù…Ø§Ø¹ÙˆÙ†', ayat: 7},{name: 'Ø§Ù„ÙƒÙˆØ«Ø±', ayat: 3},{name: 'Ø§Ù„ÙƒØ§ÙØ±ÙˆÙ†', ayat: 6},{name: 'Ø§Ù„Ù†ØµØ±', ayat: 3},
    {name: 'Ø§Ù„Ù…Ø³Ø¯', ayat: 5},{name: 'Ø§Ù„Ø¥Ø®Ù„Ø§Øµ', ayat: 4},{name: 'Ø§Ù„ÙÙ„Ù‚', ayat: 5},{name: 'Ø§Ù„Ù†Ø§Ø³', ayat: 6}
];

const azkarTbody = document.getElementById("azkarTbody");
const azkarPicker = document.getElementById("azkarDayPicker");
const addAzkarBtn = document.getElementById("addAzkarDayBtn");
const AZKAR_KEY = "azkar_days";

function getAzkarDays(){ return JSON.parse(localStorage.getItem(AZKAR_KEY))||[]; }
function saveAzkarDays(d){ localStorage.setItem(AZKAR_KEY, JSON.stringify(d)); }
function saveAzkarDay(date,data){ localStorage.setItem("azkar_"+date, JSON.stringify(data)); }
function loadAzkarDay(date){ return JSON.parse(localStorage.getItem("azkar_"+date)); }

addAzkarBtn.onclick = ()=>{
    if(!azkarPicker.value) return;
    let days = getAzkarDays();
    if(!days.includes(azkarPicker.value)){
        days.push(azkarPicker.value);
        saveAzkarDays(days);
        renderAzkarAll();
    }
};

function renderAzkarAll(){
    azkarTbody.innerHTML="";
    getAzkarDays().forEach(d=>createAzkarRow(d));
}

function createAzkarRow(date){
    const saved = loadAzkarDay(date)||{morning:false,evening:false,quran:[]};
    const tr = document.createElement("tr");
    const tdDate = document.createElement("td");
    tdDate.textContent = new Date(date).toLocaleDateString("ar-EG");
    tr.appendChild(tdDate);

    const morningTd = document.createElement("td");
    const mBox = document.createElement("div"); mBox.className="box";
    if(saved.morning) mBox.classList.add("checked");
    mBox.onclick = ()=>{
        mBox.classList.toggle("checked");
        save();
    }
    morningTd.appendChild(mBox);

    const eveningTd = document.createElement("td");
    const eBox = document.createElement("div"); eBox.className="box";
    if(saved.evening) eBox.classList.add("checked");
    eBox.onclick = ()=>{
        eBox.classList.toggle("checked");
        save();
    }
    eveningTd.appendChild(eBox);

    const quranTd = document.createElement("td");
    const addBtn = document.createElement("button");
    addBtn.className="add-quran"; addBtn.textContent="+ Ø¥Ø¶Ø§ÙØ© ÙˆØ±Ø¯";
    quranTd.appendChild(addBtn);

    function save(){ saveAzkarDay(date,{morning:mBox.classList.contains("checked"),evening:eBox.classList.contains("checked"),quran:saved.quran}); }

    addBtn.onclick = ()=>{
        const div = document.createElement("div"); div.className="quran-entry";

        const select = document.createElement("select");
        surahs.forEach(s=>{
            const opt = document.createElement("option");
            opt.value = s.name; opt.textContent=s.name; opt.dataset.ayat=s.ayat;
            select.appendChild(opt);
        });

        const from = document.createElement("input"); from.type="number"; from.placeholder="Ù…Ù†"; from.min=1;
        const to = document.createElement("input"); to.type="number"; to.placeholder="Ø¥Ù„Ù‰"; to.min=1;

        select.onchange = ()=>{
            const max = parseInt(select.selectedOptions[0].dataset.ayat);
            from.max = max; to.max=max;
            if(from.value>max) from.value=max;
            if(to.value>max) to.value=max;
        }

        const mark = document.createElement("div"); mark.className="mark-read"; mark.textContent="ØªÙ…";
        const edit = document.createElement("div"); edit.className="edit-quran"; edit.textContent="ØªØ¹Ø¯ÙŠÙ„";
        const del = document.createElement("div"); del.className="delete-quran"; del.textContent="Ã—";

        mark.onclick = ()=>{
            div.classList.add("read");
        }
        edit.onclick = ()=>{
            div.classList.remove("read");
        }
        del.onclick = ()=>{
            quranTd.removeChild(div);
        }

        div.appendChild(select); div.appendChild(from); div.appendChild(to);
        div.appendChild(mark); div.appendChild(edit); div.appendChild(del);
        quranTd.insertBefore(div, addBtn);
    }

    tr.appendChild(morningTd); tr.appendChild(eveningTd); tr.appendChild(quranTd);
    azkarTbody.appendChild(tr);
}

// initial render
renderPrayerAll();
renderAzkarAll();

</script>

</body>
</html>
