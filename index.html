<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Prayer Tracker</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@700&display=swap" rel="stylesheet">
<style>
body {
    font-family: 'Cairo', sans-serif;
    font-weight: bold;
    direction: rtl;
    padding: 20px;
    background-color: #121212;
    color: #e0e0e0;
}
table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 20px;
}
th, td {
    border: 1px solid #444;
    padding: 12px;
    text-align: center;
    vertical-align: middle;
}
th {
    background-color: #1f1f1f;
}
.box {
    width: 24px;
    height: 24px;
    border: 1px solid #888;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    font-size: 18px;
    margin: 0 auto;
}
.checked::after {
    content: '✔';
    color: #4caf50;
}
.progress-bar {
    width: 100%;
    height: 20px;
    background-color: #333;
    border-radius: 4px;
    overflow: hidden;
}
.progress-fill {
    height: 100%;
    width: 0%;
    background-color: #4caf50;
    transition: width 0.3s;
}
.quran-entry {
    display: flex;
    gap: 5px;
    margin-bottom: 5px;
}
.quran-entry select, .quran-entry input {
    padding: 4px;
    font-weight: bold;
    text-align: center;
}
.add-quran {
    margin-top: 5px;
    padding: 4px 8px;
    background-color: #4caf50;
    border: none;
    color: #fff;
    cursor: pointer;
    font-weight: bold;
}
.error-msg {
    color: #f44336;
    font-weight: bold;
    margin-top: 5px;
}
</style>
</head>
<body>

<h2>جدول الصلوات</h2>
<table id="prayerTable">
<thead>
<tr>
<th>اليوم</th>
<th>الفجر</th>
<th>الضحى</th>
<th>الظهر</th>
<th>العصر</th>
<th>المغرب</th>
<th>العشاء</th>
<th>الإنجاز</th>
</tr>
</thead>
<tbody></tbody>
</table>

<h2>جدول الأذكار والورد القرآني</h2>
<table id="azkarTable">
<thead>
<tr>
<th>اليوم</th>
<th>أذكار الصباح</th>
<th>أذكار المساء</th>
<th>الورد القرآني</th>
</tr>
</thead>
<tbody></tbody>
</table>

<script>
const surahs = [
    {name: 'الفاتحة', ayat: 7},
    {name: 'البقرة', ayat: 286},
    {name: 'آل عمران', ayat: 200},
    {name: 'النساء', ayat: 176},
    {name: 'المائدة', ayat: 120},
    // يمكن إضافة كل سور القرآن هنا مع عدد الآيات
];

const startDate = new Date('2026-01-01');
const endDate = new Date('2026-01-31');
const prayerTbody = document.querySelector('#prayerTable tbody');
const azkarTbody = document.querySelector('#azkarTable tbody');

for(let d = new Date(startDate); d <= endDate; d.setDate(d.getDate() + 1)) {
    const dateStr = d.toLocaleDateString('ar-EG');

    // جدول الصلوات
    const pRow = document.createElement('tr');
    const dateCell = document.createElement('td');
    dateCell.textContent = dateStr;
    pRow.appendChild(dateCell);

    const prayers = ['الفجر','الضحى','الظهر','العصر','المغرب','العشاء'];
    const boxes = [];

    prayers.forEach(() => {
        const cell = document.createElement('td');
        const box = document.createElement('div');
        box.classList.add('box');
        cell.appendChild(box);
        pRow.appendChild(cell);
        boxes.push(box);

        box.addEventListener('click', () => {
            box.classList.toggle('checked');
            const checkedCount = boxes.filter(b => b.classList.contains('checked')).length;
            const percent = Math.round((checkedCount / boxes.length) * 100);
            progressFill.style.width = percent + '%';
        });
    });

    const progressCell = document.createElement('td');
    const progressBar = document.createElement('div');
    progressBar.classList.add('progress-bar');
    const progressFill = document.createElement('div');
    progressFill.classList.add('progress-fill');
    progressBar.appendChild(progressFill);
    progressCell.appendChild(progressBar);
    pRow.appendChild(progressCell);

    prayerTbody.appendChild(pRow);

    // جدول الأذكار والورد
    const aRow = document.createElement('tr');
    const aDateCell = document.createElement('td');
    aDateCell.textContent = dateStr;
    aRow.appendChild(aDateCell);

    ['أذكار الصباح','أذكار المساء'].forEach(() => {
        const cell = document.createElement('td');
        const box = document.createElement('div');
        box.classList.add('box');
        cell.appendChild(box);
        aRow.appendChild(cell);
        box.addEventListener('click', () => box.classList.toggle('checked'));
    });

    const quranCell = document.createElement('td');
    const errorMsg = document.createElement('div');
    errorMsg.classList.add('error-msg');
    quranCell.appendChild(errorMsg);

    function addQuranEntry() {
        // تحقق من إكمال الورد السابق
        const lastEntry = quranCell.querySelector('.quran-entry:last-of-type');
        if(lastEntry) {
            const select = lastEntry.querySelector('select');
            const from = lastEntry.querySelector('input:nth-of-type(1)');
            const to = lastEntry.querySelector('input:nth-of-type(2)');
            if(!select.value || !from.value || !to.value) {
                errorMsg.textContent = 'اكمل الورد السابق أولاً!';
                return;
            } else {
                errorMsg.textContent = '';
            }
        }

        const entryDiv = document.createElement('div');
        entryDiv.classList.add('quran-entry');

        const selectSurah = document.createElement('select');
        surahs.forEach(surah => {
            const option = document.createElement('option');
            option.value = surah.name;
            option.textContent = surah.name;
            option.setAttribute('data-ayat', surah.ayat);
            selectSurah.appendChild(option);
        });

        const fromInput = document.createElement('input');
        fromInput.type = 'number';
        fromInput.min = 1;
        fromInput.placeholder = 'من';

        const toInput = document.createElement('input');
        toInput.type = 'number';
        toInput.min = 1;
        toInput.placeholder = 'إلى';

        // تحديث الحد الأقصى للآية عند اختيار السورة
        selectSurah.addEventListener('change', () => {
            const max = parseInt(selectSurah.selectedOptions[0].dataset.ayat);
            fromInput.max = max;
            toInput.max = max;
        });

        entryDiv.appendChild(selectSurah);
        entryDiv.appendChild(fromInput);
        entryDiv.appendChild(toInput);

        quranCell.insertBefore(entryDiv, addButton);
    }

    const addButton = document.createElement('button');
    addButton.textContent = '+ إضافة ورد';
    addButton.classList.add('add-quran');
    addButton.addEventListener('click', addQuranEntry);

    quranCell.appendChild(addButton);
    addQuranEntry(); // أول ورد تلقائي
    aRow.appendChild(quranCell);

    azkarTbody.appendChild(aRow);
}
</script>

</body>
</html>
