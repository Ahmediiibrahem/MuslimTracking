<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø§Ù„Ø£Ø°ÙƒØ§Ø± ÙˆØ§Ù„ÙˆØ±Ø¯</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@700&display=swap" rel="stylesheet">
<style>
body {
    font-family: Cairo, sans-serif;
    background:#121212;
    color:#eee;
    padding:20px;
    direction: rtl;
}

.date-box {
    max-width: 260px;
    margin-bottom: 15px;
}

.date-box input, button {
    width:100%;
    padding:10px;
    margin-top:6px;
    border-radius:8px;
    border:none;
    font-weight:bold;
}

button {
    background:#4caf50;
    color:white;
}

table {
    width:100%;
    border-collapse:collapse;
}

th, td {
    border:1px solid #444;
    padding:10px;
    text-align:center;
}

.box {
    width:24px;
    height:24px;
    border:1px solid #aaa;
    margin:auto;
    cursor:pointer;
}

.checked::after {
    content:"âœ”";
    color:#4caf50;
}
</style>
</head>
<body>

<h2>ğŸ“– Ø§Ù„Ø£Ø°ÙƒØ§Ø± ÙˆØ§Ù„ÙˆØ±Ø¯</h2>

<div class="date-box">
    <label>Ø§Ø®ØªØ± Ø§Ù„ÙŠÙˆÙ…</label>
    <input type="date" id="dayPicker">
    <button id="addDayBtn">â• Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙŠÙˆÙ…</button>
</div>

<table>
<thead>
<tr>
<th>Ø§Ù„ÙŠÙˆÙ…</th>
<th>Ø£Ø°ÙƒØ§Ø± Ø§Ù„ØµØ¨Ø§Ø­</th>
<th>Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ù…Ø³Ø§Ø¡</th>
<th>Ù…Ù„Ø§Ø­Ø¸Ø§Øª / ÙˆØ±Ø¯</th>
</tr>
</thead>
<tbody id="tbody"></tbody>
</table>

<script>
const tbody = document.getElementById("tbody");
const picker = document.getElementById("dayPicker");
const addBtn = document.getElementById("addDayBtn");

const DAYS_KEY = "azkar_days";

function getDays() {
    return JSON.parse(localStorage.getItem(DAYS_KEY)) || [];
}

function saveDays(arr) {
    localStorage.setItem(DAYS_KEY, JSON.stringify(arr));
}

function saveDay(date, data) {
    localStorage.setItem("azkar_" + date, JSON.stringify(data));
}

function loadDay(date) {
    return JSON.parse(localStorage.getItem("azkar_" + date));
}

addBtn.onclick = () => {
    if (!picker.value) return;
    let days = getDays();
    if (!days.includes(picker.value)) {
        days.push(picker.value);
        saveDays(days);
        renderAll();
    }
};

function renderAll() {
    tbody.innerHTML = "";
    getDays().forEach(d => createRow(d));
}

function createRow(date) {
    const saved = loadDay(date) || { morning:false, evening:false, note:"" };

    const tr = document.createElement("tr");

    const tdDate = document.createElement("td");
    tdDate.textContent = new Date(date).toLocaleDateString("ar-EG");
    tr.appendChild(tdDate);

    const morning = document.createElement("td");
    const mBox = document.createElement("div");
    mBox.className = "box";
    if (saved.morning) mBox.classList.add("checked");
    mBox.onclick = () => {
        mBox.classList.toggle("checked");
        save();
    };
    morning.appendChild(mBox);

    const evening = document.createElement("td");
    const eBox = document.createElement("div");
    eBox.className = "box";
    if (saved.evening) eBox.classList.add("checked");
    eBox.onclick = () => {
        eBox.classList.toggle("checked");
        save();
    };
    evening.appendChild(eBox);

    const noteTd = document.createElement("td");
    const input = document.createElement("input");
    input.placeholder = "Ù…Ø«Ø§Ù„: Ø³ÙˆØ±Ø© Ø§Ù„Ø¨Ù‚Ø±Ø© 1â€“20";
    input.value = saved.note || "";
    input.style.width = "100%";
    input.oninput = save;
    noteTd.appendChild(input);

    tr.appendChild(morning);
    tr.appendChild(evening);
    tr.appendChild(noteTd);

    function save() {
        saveDay(date, {
            morning: mBox.classList.contains("checked"),
            evening: eBox.classList.contains("checked"),
            note: input.value
        });
    }

    tbody.appendChild(tr);
}

renderAll();
</script>

</body>
</html>
